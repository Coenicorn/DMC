(()=>{"use strict";class t{assets;assetsLoading;constructor(){this.assets=[]}async loadAssets(t,s){this.assetsLoading=t.length;for(let e=0,i=this.assetsLoading;e<i;e++){let i=t[e],n=await new Promise(((t,e)=>{let n=new Image;n.src=`${s}/${i}.png`,n.onload=()=>t(n),n.onerror=()=>{throw new Error("Image does not exist")}}));this.assets[i]=n}return this.assets}}class s extends t{imageLoader;width;height;canvas;context;constructor(s=null){super(),s?this.canvas=document.getElementById(s):(this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas)),this.context=this.canvas.getContext("2d"),this.imageLoader=new t,this.resize()}resize(){this.width=innerWidth,this.height=innerHeight,this.canvas.width=this.width,this.canvas.height=this.height}clear(){this.context.clearRect(0,0,this.width,this.height)}}class e{x;y;constructor(t,s){this.x=t,this.y=s}add(t){this.x+=t.x,this.y+=t.y}sub(t){this.x-=t.x,this.y-=t.y}mult(t){this.x*=t.x,this.y*=t.y}div(t){this.x/=t.x,this.y/=t.y}}class i extends class{pos;vel;constructor(t){this.pos=t,this.vel=new e(0,0)}}{constructor(t){super(t)}update(){this.pos.x+=1}render(t){t.fillStyle="red",t.fillRect(this.pos.x,this.pos.y,50,50)}}(new class extends s{renderer;fps;running;testObject;gameObjects;constructor(){super(),this.renderer=new s,this.gameObjects=[],this.running=!1}async init(){await this.renderer.imageLoader.loadAssets([],"../img"),this.running=!0,this.gameObjects.push(new i(new e(0,0))),this.loop()}loop(){let t=Date.now(),s=0,e=0;this.fps=1e3/60,requestAnimationFrame(function i(){for(s=Date.now(),e=s-t,t=s;e>0;)this.update(),e-=this.fps;this.render(),this.running&&requestAnimationFrame(i.bind(this))}.bind(this))}update(){for(let t of this.gameObjects)t.update()}render(){this.renderer.clear();for(let t of this.gameObjects)t.render(this.renderer.context)}}).init()})();